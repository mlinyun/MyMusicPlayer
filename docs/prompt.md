# 🎵 Android 音乐播放器开发提示词

---

## ✅ Step 1：需求分析

请帮助我对一个功能完整、结构清晰的 Android 音乐播放器 App 进行**系统化需求分析**，并输出至文件：`music_player_mrd.md`，内容应包括：

### 🎯 功能需求清单

* 播放控制功能：播放 / 暂停 / 停止 / 退出
* 歌曲切换功能：上一曲 / 下一曲
* 播放进度控制：SeekBar 拖动控制
* 播放时间显示：当前时间 / 总时长
* 播放列表管理：添加、移除、当前播放高亮
* 歌词同步显示：支持 `.lrc` 格式，自动滚动及高亮当前句
* 歌词/封面视图切换：点击切换不同展示模式

### 🖼️ 用户界面元素

* 顶部状态栏
* 专辑封面区域（支持点击切换歌词）
* 歌曲信息（标题 + 艺术家）
* 播放控制区（5 个功能按钮）
* 播放进度条 + 时间显示（当前/总时长）
* 播放列表视图（RecyclerView）
* 歌词显示区域（滚动、高亮当前句）

### 🔧 技术实现要求

* 使用 **Java** 编写
* 使用 **MediaPlayer 或 ExoPlayer** 进行音频播放
* 播放列表使用 **RecyclerView** 管理
* 歌词同步功能需支持 `.lrc` 格式
* 使用 **属性动画** 提升 UI 动效体验（旋转、滚动、淡入淡出）

### 📊 附加设计文档要求

* 播放器状态转换图（状态机建模）
* 歌词同步机制设计（基于时间戳）
* 播放控制流程图
* 技术选型分析与对比（如 MediaPlayer vs ExoPlayer）

---

## ✅ Step 2：产品需求文档（PRD）

请基于 `music_player_mrd.md` 输出标准化 PRD 文档 `music_player_prd.md`，内容包括：

1. 产品概述
2. 功能规格：

   * 播放控制模块
   * 播放列表管理模块
   * 歌词显示模块
   * 封面与歌词视图切换
3. 用户界面设计规范（元素布局、控件交互规范）
4. 音频播放架构（模块协作与播放流程）
5. 用户交互流程图（切歌、点击、滑动等行为）
6. 技术约束：

   * 必须使用 Java 编程语言
   * 必须支持 `.lrc` 歌词格式

---

## ✅ Step 3：高保真原型设计

你是一名资深 Android UI/UX 设计师，请根据 `music_player_prd.md` 设计高保真交互原型，并输出文件为 `music_player_prototype.html`。要求如下：

### 💡 原型功能展示要求

* **封面视图模式**：展示专辑封面 + 歌曲信息
* **歌词视图模式**：展示当前播放歌词，支持滚动和高亮
* **播放控制区**：播放 / 暂停 / 上一首 / 下一首 / 停止
* **播放列表视图**：可展开，当前播放项高亮
* **播放进度条与时间显示**

### 🧰 技术与美术支持

* 使用 `HTML + Tailwind CSS` 编写
* 引入 FontAwesome 等开源图标库，美化播放控制按钮、列表图标等
* 实现响应式布局，适配不同屏幕尺寸
* 添加微交互效果（如按钮点击反馈、歌词滚动动效）

### ✅ 原型质量要求

* 原型应具备**真实界面还原度**，可以**直接用作前端开发的 UI 参考模板**
* 所有控件应具备可复用结构和命名，便于代码对应开发

---

## ✅ Step 4：架构设计文档

请根据原型和 PRD，撰写完整架构设计文档 `music_player_architecture.md`，应包括：

### 🧱 模块划分结构

* 音频播放模块（服务、状态监听）
* 播放列表管理模块（数据加载与刷新）
* 歌词处理模块（解析 .lrc、渲染与同步）
* UI 控制模块（主界面交互逻辑）

### 📐 类图与数据结构设计

* `MusicPlayerManager`（播放引擎封装）
* `SongAdapter`（RecyclerView 适配器）
* `LrcParser`（歌词解析工具类）
* `MainActivity` / `PlaybackFragment`（界面控制）

### 🔄 关键流程建模

* 播放流程：加载 → 播放 → 暂停/停止
* 歌词同步流程：时间匹配 → 滚动 → 高亮
* 视图切换流程：歌词 ↔ 封面
* 播放列表交互流程：点击切歌、添加删除

### 🚀 性能优化策略

* 后台播放支持（使用前台服务）
* 歌词/歌曲缓存机制
* UI 动效与滚动流畅性优化
* 异常场景处理（播放失败、格式错误等）

---

## ✅ Step 5：模块化代码实现

请根据架构设计文档(`music_player_architecture.md`)，需求文档(`music_player_prd.md`)以及原型图(`music_player_prototype.html`)
进行代码的开发，使用 Java 编程语言，请你严格按照架构设计文档来开发，界面严格参照原型图

请基于前述文档和原型图，使用 Java 语言在 Android 平台开发音乐播放器应用，项目包名为：`com.mlinyun.mymusicplayer`

### 🏗️ 项目结构建议

* `player`：播放引擎封装（MediaPlayer/ExoPlayer）
* `ui`：所有界面相关 Activity/Fragment/View
* `adapter`：RecyclerView 适配器
* `model`：歌曲与歌词数据模型
* `utils`：歌词解析、格式化工具等

---

### 🧠 分功能实现说明

#### 1. 播放器核心功能（音频服务）

* 创建 `MusicPlayerService`，实现后台播放和状态广播
* 封装播放控制逻辑（play、pause、stop、seek）
* 支持前台服务通知样式，兼容 Android 16+

#### 2. 播放列表管理

* 创建 `SongAdapter` 和 `PlaylistManager`
* 支持添加、删除、点击播放指定歌曲
* 实现 RecyclerView 高亮当前项、滑动定位等功能

#### 3. 歌词解析与同步

* 编写 `LrcParser.java` 工具类，解析 `.lrc` 文件
* 设计 `LrcView` 自定义控件，实现歌词滚动、高亮
* 将歌词时间戳与播放器进度进行同步匹配

#### 4. 主界面开发

* 构建主页面布局（含封面视图与歌词视图）
* 控制按钮点击事件绑定（使用 setOnClickListener）
* 播放进度与 SeekBar 联动
* 添加封面旋转动画和视图切换动画

#### 5. 动效与细节优化

* 封面旋转动效：ObjectAnimator + Lifecycle 控制
* 歌词滚动动画：平滑滚动 + 高亮过渡
* 视图切换：淡入淡出或滑动切换动画

---

### ✅ 编码规范要求

* 全项目遵循 Android Java 代码规范
* 每个类和方法添加**中文注释**说明功能与逻辑
* 全面处理播放状态、文件异常、无网络等边界情况
* 保证 UI 响应迅速、动效流畅、内存占用可控
